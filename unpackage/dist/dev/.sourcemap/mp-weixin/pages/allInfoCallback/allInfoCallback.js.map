{"version":3,"sources":["uni-app:///main.js",null,"webpack:///F:/uni插件/QS-SharePoster示例/pages/allInfoCallback/allInfoCallback.vue?f939","webpack:///F:/uni插件/QS-SharePoster示例/pages/allInfoCallback/allInfoCallback.vue?f77b","webpack:///F:/uni插件/QS-SharePoster示例/pages/allInfoCallback/allInfoCallback.vue?7607","uni-app:///pages/allInfoCallback/allInfoCallback.vue","webpack:///F:/uni插件/QS-SharePoster示例/pages/allInfoCallback/allInfoCallback.vue?943b","webpack:///F:/uni插件/QS-SharePoster示例/pages/allInfoCallback/allInfoCallback.vue?6833"],"names":["createPage","Page"],"mappings":"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","file":"pages/allInfoCallback/allInfoCallback.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/allInfoCallback/allInfoCallback.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./allInfoCallback.vue?vue&type=template&id=6bc468b0&\"\nvar renderjs\nimport script from \"./allInfoCallback.vue?vue&type=script&lang=js&\"\nexport * from \"./allInfoCallback.vue?vue&type=script&lang=js&\"\nimport style0 from \"./allInfoCallback.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/allInfoCallback/allInfoCallback.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allInfoCallback.vue?vue&type=template&id=6bc468b0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allInfoCallback.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allInfoCallback.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<!-- 说明 -->\r\n\t\t<text style=\"font-size: 29rpx;color: #999;\">\r\n\t\t\tallInfoCallback为drawArray有序序列专属 \\n\r\n\t\t\t可以获取该有序序列内所有元素的信息 \\n\r\n\t\t\t可以用serialNum控制顺序，serialNum越小越先执行 \\n\r\n\t\t\tallInfoCallback可以return一个对象或Promise对象(最终resolve一个对象)用以更新覆盖原属性\r\n\t\t</text>\r\n\t\t<!-- 生成海报 -->\r\n\t\t<button type=\"primary\" @tap=\"shareFc()\">生成海报</button>\r\n\t\t<!-- 图片展示由自己实现 -->\r\n\t\t<QSPopup ref=\"popup\">\r\n\t\t\t<view class=\"flex_column\">\r\n\t\t\t\t<view class=\"backgroundColor-white padding1vh border_radius_10px\">\r\n\t\t\t\t\t<image :src=\"posterImage || ''\" mode=\"widthFix\" class=\"posterImage\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex_row marginTop2vh\">\r\n\t\t\t\t\t<button type=\"primary\" size=\"mini\" @tap.prevent.stop=\"saveImage()\">保存图片</button>\r\n\t\t\t\t\t<button type=\"primary\" size=\"mini\" @tap.prevent.stop=\"share()\">分享图片</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</QSPopup>\r\n\t\t<!-- 画布 -->\r\n\t\t<view class=\"hideCanvasView\">\r\n\t\t\t<canvas class=\"hideCanvas\" id=\"default_PosterCanvasId\" canvas-id=\"default_PosterCanvasId\"\r\n\t\t\t\t:style=\"{width: (poster.width||10) + 'px', height: (poster.height||10) + 'px'}\"></canvas>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport _app from '@/util/QS-SharePoster/app.js';\r\n\timport {\r\n\t\tgetSharePoster\r\n\t} from '@/util/QS-SharePoster/QS-SharePoster.js';\r\n\tvar ctx;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tposter: {},\r\n\t\t\t\tposterImage: '',\r\n\t\t\t\tcanvasId: 'default_PosterCanvasId'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tctx = uni.createCanvasContext(this.canvasId, this);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync shareFc() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t_app.log('准备生成:' + new Date())\r\n\t\t\t\t\tconst d = await getSharePoster({\r\n\t\t\t\t\t\t_this: this, //若在组件中使用 必传\r\n\t\t\t\t\t\ttype: 'testShareType',\r\n\t\t\t\t\t\tContext: ctx,\r\n\t\t\t\t\t\tposterCanvasId: this.canvasId, //canvasId\r\n\t\t\t\t\t\tdelayTimeScale: 20, //延时系数\r\n\t\t\t\t\t\tdraw: false, //是否执行ctx.draw方法, 推荐false，自己去draw\r\n\t\t\t\t\t\tdrawArray: ({\r\n\t\t\t\t\t\t\tbgObj,\r\n\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\tbgScale\r\n\t\t\t\t\t\t}) => {\r\n\t\t\t\t\t\t\tconst dx = bgObj.width * 0.3;\r\n\t\t\t\t\t\t\tconst fontSize = bgObj.width * 0.045;\r\n\t\t\t\t\t\t\tconst lineHeight = bgObj.height * 0.04;\r\n\t\t\t\t\t\t\t//可直接return数组，也可以return一个promise对象, 但最终resolve一个数组, 这样就可以方便实现后台可控绘制海报\r\n\t\t\t\t\t\t\treturn new Promise((rs, rj) => {\r\n\t\t\t\t\t\t\t\trs([{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'custom',\r\n\t\t\t\t\t\t\t\t\t\tsetDraw(Context) {\r\n\t\t\t\t\t\t\t\t\t\t\tContext.setFillStyle('black');\r\n\t\t\t\t\t\t\t\t\t\t\tContext.setGlobalAlpha(0.3);\r\n\t\t\t\t\t\t\t\t\t\t\tContext.fillRect(0, bgObj.height - bgObj\r\n\t\t\t\t\t\t\t\t\t\t\t\t.height * 0.2, bgObj.width, bgObj\r\n\t\t\t\t\t\t\t\t\t\t\t\t.height * 0.2);\r\n\t\t\t\t\t\t\t\t\t\t\tContext.setGlobalAlpha(1);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'image',\r\n\t\t\t\t\t\t\t\t\t\turl: '/static/3.jpg',\r\n\t\t\t\t\t\t\t\t\t\talpha: .3,\r\n\t\t\t\t\t\t\t\t\t\tdx,\r\n\t\t\t\t\t\t\t\t\t\tdy: bgObj.height - bgObj.width * 0.25,\r\n\t\t\t\t\t\t\t\t\t\tinfoCallBack(imageInfo) {\r\n\t\t\t\t\t\t\t\t\t\t\tlet scale = bgObj.width * 0.2 / imageInfo\r\n\t\t\t\t\t\t\t\t\t\t\t\t.height;\r\n\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcircleSet: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tx: imageInfo.width * scale / 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ty: bgObj.width * 0.2 / 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tr: bgObj.width * 0.2 / 2\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, // 圆形图片 , 若circleSet与roundRectSet一同设置 优先circleSet设置\r\n\t\t\t\t\t\t\t\t\t\t\t\tdWidth: imageInfo.width *\r\n\t\t\t\t\t\t\t\t\t\t\t\tscale, // 因为设置了圆形图片 所以要乘以2\r\n\t\t\t\t\t\t\t\t\t\t\t\tdHeight: bgObj.width * 0.2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t/* roundRectSet: { // 圆角矩形\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tr: imageInfo.width * .1\r\n\t\t\t\t\t\t\t\t\t\t\t\t} */\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\tfontStyle: 'italic',\r\n\t\t\t\t\t\t\t\t\t\ttext: '一二\\n三四五六七八九十十一十二<br />十三十四十五十六十七十八十九二十二十一二十二',\r\n\t\t\t\t\t\t\t\t\t\tsize: fontSize,\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\tserialNum: 0,\r\n\t\t\t\t\t\t\t\t\t\tid: 'lineFeed',\r\n\t\t\t\t\t\t\t\t\t\tdx: bgObj.width * .1,\r\n\t\t\t\t\t\t\t\t\t\tdy: bgObj.height * .1,\r\n\t\t\t\t\t\t\t\t\t\tlineFeed: {\r\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: bgObj.width * .3,\r\n\t\t\t\t\t\t\t\t\t\t\tlineNum: 2\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\tfontStyle: 'italic',\r\n\t\t\t\t\t\t\t\t\t\ttext: '我可以获取上面换行的数据, 跟在他后面',\r\n\t\t\t\t\t\t\t\t\t\tsize: fontSize,\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\tserialNum: 1,\r\n\t\t\t\t\t\t\t\t\t\tdx: bgObj.width * .1,\r\n\t\t\t\t\t\t\t\t\t\tlineFeed: {\r\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: bgObj.width * .3,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tallInfoCallback({\r\n\t\t\t\t\t\t\t\t\t\t\tdrawArray\r\n\t\t\t\t\t\t\t\t\t\t} = {}) {\r\n\t\t\t\t\t\t\t\t\t\t\tconst lineFeeds = drawArray.filter(ite => ite.id == 'lineFeed');\r\n\t\t\t\t\t\t\t\t\t\t\tconst last = lineFeeds[lineFeeds.length - 1];\r\n\t\t\t\t\t\t\t\t\t\t\tconst r = {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdy: last.dy + fontSize + 15\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn r;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\tfontStyle: 'italic',\r\n\t\t\t\t\t\t\t\t\t\ttext: '取舍',\r\n\t\t\t\t\t\t\t\t\t\tsize: fontSize,\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\talpha: .5,\r\n\t\t\t\t\t\t\t\t\t\ttextAlign: 'left',\r\n\t\t\t\t\t\t\t\t\t\ttextBaseline: 'middle',\r\n\t\t\t\t\t\t\t\t\t\tinfoCallBack(textLength) {\r\n\t\t\t\t\t\t\t\t\t\t\t_app.log(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'index页面的text的infocallback ，textlength:' +\r\n\t\t\t\t\t\t\t\t\t\t\t\ttextLength);\r\n\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdx: bgObj.width - textLength - fontSize,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdy: bgObj.height - lineHeight * 3\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tserialNum: 0,\r\n\t\t\t\t\t\t\t\t\t\tid: 'tag1' //自定义标识\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\ttext: '取舍',\r\n\t\t\t\t\t\t\t\t\t\tfontWeight: 'bold',\r\n\t\t\t\t\t\t\t\t\t\tsize: fontSize,\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\talpha: .75,\r\n\t\t\t\t\t\t\t\t\t\ttextAlign: 'left',\r\n\t\t\t\t\t\t\t\t\t\ttextBaseline: 'middle',\r\n\t\t\t\t\t\t\t\t\t\tserialNum: 1,\r\n\t\t\t\t\t\t\t\t\t\tallInfoCallback({ //v3.0.1 更新 可以获取drawArray中全部数据\r\n\t\t\t\t\t\t\t\t\t\t\tdrawArray\r\n\t\t\t\t\t\t\t\t\t\t} = {}) {\r\n\t\t\t\t\t\t\t\t\t\t\tconst obj = drawArray.find(item => item.id === 'tag1');\r\n\t\t\t\t\t\t\t\t\t\t\tconst lineFeed = drawArray.filter(item => item.id === 'lineFeed');\r\n\t\t\t\t\t\t\t\t\t\t\t/* return {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdx: obj.dx,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdy: obj.dy + lineHeight\r\n\t\t\t\t\t\t\t\t\t\t\t} */\r\n\t\t\t\t\t\t\t\t\t\t\t//也可以return promise对象\r\n\t\t\t\t\t\t\t\t\t\t\treturn new Promise((rs, rj) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trs({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdx: obj.dx,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdy: obj\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.dy +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\ttext: '取舍',\r\n\t\t\t\t\t\t\t\t\t\tsize: fontSize,\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\talpha: 1,\r\n\t\t\t\t\t\t\t\t\t\ttextAlign: 'left',\r\n\t\t\t\t\t\t\t\t\t\ttextBaseline: 'middle',\r\n\t\t\t\t\t\t\t\t\t\tinfoCallBack(textLength) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdx: bgObj.width - textLength - fontSize,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdy: bgObj.height - lineHeight\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'qrcode',\r\n\t\t\t\t\t\t\t\t\t\ttext: '你好，我是取舍',\r\n\t\t\t\t\t\t\t\t\t\tsize: bgObj.width * 0.2,\r\n\t\t\t\t\t\t\t\t\t\tdx: bgObj.width * 0.05,\r\n\t\t\t\t\t\t\t\t\t\tdy: bgObj.height - bgObj.width * 0.25\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsetCanvasWH: ({\r\n\t\t\t\t\t\t\tbgObj,\r\n\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\tbgScale\r\n\t\t\t\t\t\t}) => { // 为动态设置画布宽高的方法，\r\n\t\t\t\t\t\t\tthis.poster = bgObj;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tctx.draw(false, ()=>{\r\n\t\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\t\tcanvasId: this.canvasId,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tthis.posterImage = res.tempFilePath;\r\n\t\t\t\t\t\t\t\t_app.log('海报生成成功, 时间:' + new Date() + '， 临时路径: ' + res.tempFilePath);\r\n\t\t\t\t\t\t\t\tthis.$refs.popup.show()\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\t\t\tconsole.log('生成异常', err)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t_app.hideLoading();\r\n\t\t\t\t\t_app.showToast(JSON.stringify(e));\r\n\t\t\t\t\tconsole.log(JSON.stringify(e));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsaveImage() {\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\tfilePath: this.poster.finalPath,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t_app.showToast('保存成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t_app.showToast('保存了');\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tshare() {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t_app.getShare(false, false, 2, '', '', '', this.poster.finalPath, false, false);\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\t_app.showToast('分享了');\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\thideQr() {\r\n\t\t\t\tthis.$refs.popup.hide()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.hideCanvasView {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.hideCanvas {\r\n\t\tposition: fixed;\r\n\t\ttop: -99999upx;\r\n\t\tleft: -99999upx;\r\n\t\tz-index: -99999;\r\n\t}\r\n\r\n\t.flex_row_c_c {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.modalView {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\topacity: 0;\r\n\t\toutline: 0;\r\n\t\ttransform: scale(1.2);\r\n\t\t/* perspective: 2500upx; */\r\n\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\t\ttransition: all .3s ease-in-out;\r\n\t\tpointer-events: none;\r\n\t\t/* backface-visibility: hidden; */\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.modalView.show {\r\n\t\topacity: 1;\r\n\t\ttransform: scale(1);\r\n\t\tpointer-events: auto;\r\n\t}\r\n\r\n\t.flex_column {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.backgroundColor-white {\r\n\t\tbackground-color: white;\r\n\t}\r\n\r\n\t.border_radius_10px {\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\r\n\t.padding1vh {\r\n\t\tpadding: 1vh;\r\n\t}\r\n\r\n\t.posterImage {\r\n\t\twidth: 60vw;\r\n\t}\r\n\r\n\t.flex_row {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.marginTop2vh {\r\n\t\tmargin-top: 2vh;\r\n\t}\r\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allInfoCallback.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./allInfoCallback.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1617947008535\n      var cssReload = require(\"E:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}